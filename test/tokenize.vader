Before;
let __file__ = g:vader_file

Execute(tokenize.py);
let input_ = maktaba#path#Join([fnamemodify(__file__, ':h:h'), 'test', 'database', 'ccf', 'Game.py'])
Assert filereadable(input_)

let a_out = input_.'.out'
let b_out = input_.'.OUT'
call tokenize#main(input_, a_out, 1)
call system('python3 -m tokenize -e '.input_.' >'.b_out)

Execute(ccf);
let ccf = maktaba#path#Join([fnamemodify(__file__, ':h'), 'database', 'ccf', '*.py'])
Log ccf
let feeds = split(glob(ccf), "\n")
for each in feeds
  let a = printf('%s.out', each)
  let b = printf('%s.OUT', each)
  call tokenize#main(each, a, 1)
  call system(printf('python3 -m tokenize -e %s >%s', each, b))
  let out = systemlist(printf('diff %s %s', a, b))
  if !empty(out)
    let df = printf('%s.diff', each)
    Log printf('difference written to %s', df)
    call writefile(out, df)
  else
    Log printf('%s done', each)
  endif
endfor
